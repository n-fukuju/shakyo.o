<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <button id="btn">button</button>
        <script type="text/javascript" src="php-web.js"></script>
        <script type="text/javascript">
            var options = {
                // print: (text)=>{ console.log(text); },
                // printErr: (text)=>{ console.log(text); }
            };
            var php;
            console.log('PHP() start.')
            PHP(options).then((result)=>{
                php = result;
                console.log('PHP() promise complete.');
                console.log('php: ', php);
            });
            // console.log('phpModule: ', php);
            
            var btn = document.getElementById('btn');
            btn.addEventListener('click', (evt)=>{
                // console.log('phpModule: ', php);
                let ret = php.ccall('pib_eval', 'number', ["string"], ['echo "xxx"']);
                if(ret != 0){
                    console.log('err:', ret);
                }
                php.run('<?php echo "Hello.";');
            });
        </script>
        <script type="text/php">
            <?php
                $console->log('log from text/php');
            ?>
        </script>
    </body>
</html>