<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <button id="btn">button</button>
        <script type="text/javascript" src="php-web.js"></script>
        <!-- <script type="text/javascript">
            var options = {
                // print: (text)=>{ console.log(text); },
                // printErr: (text)=>{ console.log(text); }
            };
            var php;
            console.log('PHP() start.')
            PHP(options).then((result)=>{
                php = result;
                console.log('PHP() promise complete.');
                console.log('php: ', php);
            });
            // console.log('phpModule: ', php);
            
            var btn = document.getElementById('btn');
            btn.addEventListener('click', (evt)=>{
                // console.log('phpModule: ', php);
                let ret = php.ccall('pib_eval', 'number', ["string"], ['echo "xxx"']);
                if(ret != 0){
                    console.log('err:', ret);
                }
                php.run('<?php echo "Hello.";');
            });
        </script> -->
        <script>require('initialize');</script>
        <script type="text/php">
            <?php
                $window = new \Vrzno;
                $console = $window->console;
                $document = $window->document;
                $b = $document->getElementById('btn');
                $b->addEventListener('click', function(){
                    vrzno_run('alert', ['php-wasm']);
                });
                $console->log('php loaded.');
            ?>
        </script>
    </body>
</html>